function $childNode(o) {
	return window.frames[o]
}

function animationHover(o, e) {
	o = $(o), o.hover(function() {
		o.addClass("animated " + e)
	}, function() {
		window.setTimeout(function() {
			o.removeClass("animated " + e)
		}, 2e3)
	})
}

function WinMove() {
	var o = "[class*=col]",
		e = ".ibox-title",
		i = "[class*=col]";
	$(o).sortable({
		handle: e,
		connectWith: i,
		tolerance: "pointer",
		forcePlaceholderSize: !0,
		opacity: .8
	}).disableSelection()
}
var $parentNode = window.parent.document;
if ($(".tooltip-demo").tooltip({
		selector: "[data-toggle=tooltip]",
		container: "body"
	}), $(".modal").appendTo("body"), $("[data-toggle=popover]").popover(), $(".collapse-link").click(function() {
		var o = $(this).closest("div.ibox"),
			e = $(this).find("i"),
			i = o.find("div.ibox-content");
		i.slideToggle(200), e.toggleClass("fa-chevron-up").toggleClass("fa-chevron-down"), o.toggleClass("").toggleClass("border-bottom"), setTimeout(function() {
			o.resize(), o.find("[id^=map-]").resize()
		}, 50)
	}), $(".close-link").click(function() {
		var o = $(this).closest("div.ibox");
		o.remove()
	}), top == this) {
	var gohome = '<div class="gohome"><a class="animated bounceInUp" href="/admin.php" title="返回首页"><i class="fa fa-home"></i></a></div>';
	$("body").append(gohome)
}

$(".win-forward").click(function() {
	window.history.forward(1);
});
$(".win-back").click(function() {
	window.history.back(-1);
});
$(".win-backtop").click(function() {
	$('body,html').animate({
		scrollTop: 0
	}, 1000);
	return false;
});
$(".win-refresh").click(function() {
	window.location.reload();
});
$(".win-print").click(function() {
	window.print();
});
$(".win-close").click(function() {
	window.close();
});
$('.checkall').click(function() {
	var e = $(this);
	var name = e.attr("name");
	var checkfor = e.attr("checkfor");
	var type;
	if (checkfor != '' && checkfor != null && checkfor != undefined) {
		type = e.closest('form').find("input[name='" + checkfor + "']");
	} else {
		type = e.closest('form').find("input[type='checkbox']");
	};
	if (name == "checkall") {
		$(type).each(function(index, element) {
			element.checked = true;
		});
		e.attr("name", "ok");
	} else {
		$(type).each(function(index, element) {
			element.checked = false;
		});
		e.attr("name", "checkall");
	}
});
$("<link>")
	.attr({
		rel: "stylesheet",
		type: "text/css",
		href: "/static/js/plugins/toastr/toastr.min.css"
	})
	.appendTo("head");
$.getScript("/static/js/plugins/toastr/toastr.min.js", function() {
	toastr.options = {
		"closeButton": true,
		"debug": false,
		"progressBar": false,
		"positionClass": "toast-top-right",
		"onclick": null,
		"showDuration": "400",
		"hideDuration": "1000",
		"timeOut": "7000",
		"extendedTimeOut": "1000",
		"showEasing": "swing",
		"hideEasing": "linear",
		"showMethod": "fadeIn",
		"hideMethod": "fadeOut"
	};
});

function $delete(action, where) {
	swal({
		title: "您确定要删除这条信息吗",
		text: "删除后将无法恢复，请谨慎操作！",
		type: "warning",
		showCancelButton: true,
		confirmButtonColor: "#DD6B55",
		confirmButtonText: "是，删除它！",
		cancelButtonText: "不，保留它！",
		closeOnConfirm: false,
		closeOnCancel: false
	}, function(isConfirm) {
		if (isConfirm) {
			$.ajax({
				type: "POST",
				url: action,
				data: where,
				success: function(msg) {
					swal("删除成功！", "您已经永久删除了这条信息。", "success");
					location.reload();
				}
			});
		} else {
			swal("删除失败！", "已经保留下来了。", "error");
		}

	});
}

function $isTop(action, where) {
	$.ajax({
		type: "POST",
		url: action,
		data: where,
		success: function(msg) {
			if (msg.code == 1) {
				if (msg.datas == 1) {
					swal("置顶成功！", "该信息将在所属栏目置顶。", "success");
					location.reload();
				} else {
					swal("取消置顶！", "该信息将恢复正常排序。");
					location.reload();
				}
			} else {
				swal("错误信息！", msg.error, "warning");
			}
		}
	});
}
function $adminDel(action, where) {
	swal({
		title: "移除管理权限",
		text: "您确定要取消该用户的管理员权限？",
		type: "warning",
		showCancelButton: true,
		confirmButtonColor: "#DD6B55",
		confirmButtonText: "是，移除它！",
		cancelButtonText: "不，保留它！",
		closeOnConfirm: false,
		closeOnCancel: false
	}, function(isConfirm) {
		if (isConfirm) {
			$.ajax({
				type: "POST",
				url: action,
				data: where,
				success: function(msg) {
					swal("移除成功！", "您已经移除了此用户的管理权限。", "success");
					location.reload();
				}
			});
		} else {
			swal("移除失败！", "请检查网络。", "error");
		}

	});
}

function $to_index(action, where) {
	$.ajax({
		type: "POST",
		url: action,
		data: where,
		success: function(msg) {
			if (msg.code == 1) {
				if (msg.datas == 1) {
					swal("推荐首页成功！", "该信息将在首页显示。", "success");
					location.reload();
				} else {
					swal("取消首页显示！", "该信息将恢复正常显示。");
					location.reload();
				}
			} else {
				swal("错误信息！", msg.error, "warning");
			}
		}
	});
}